# Звіт щодо ER-діаграми для інтернет-магазину

## Короткий опис
Ця ER-діаграма моделює базу даних для онлайн-магазину. Вона охоплює основні сутності, необхідні для роботи системи: користувачі, продукти, категорії, кошики, замовлення, оплати, доставка, відгуки, списки бажань та знижки. Діаграма демонструє, як дані між цими сутностями пов’язані і як вони взаємодіють у бізнес-процесах.

## Взаємодія сутностей
- **Користувач (`User`)** — центральна сутність. Користувач може:
  - мати кілька **адрес (`Address`)** для доставки;  
  - створювати **кошики (`Cart`)** для тимчасового зберігання товарів;  
  - додавати товари у **списки бажань (`Wishlist`)**;  
  - залишати **відгуки (`Review`)** на продукти;  
  - робити **замовлення (`Order`)**, які потім оплачуються та доставляються.  

- **Адреса (`Address`)** використовується для конкретного замовлення. Одне замовлення завжди прив’язане до однієї адреси.

- **Категорії (`Category`)** групують продукти і можуть мати підкатегорії, дозволяючи гнучку ієрархію.  
- **Продукти (`Product`)** належать до категорій і можуть бути у кошиках, списках бажань, відгуках та знижках.  

- **Кошик (`Cart`)** містить **елементи кошика (`CartItem`)**, кожен з яких прив’язаний до конкретного продукту. Кошик може бути конвертований в одне замовлення.

- **Замовлення (`Order`)** прив’язане до користувача, кошика та адреси. Кожне замовлення може мати **оплату (`Payment`)** та **доставку (`Delivery`)**, що дозволяє відстежувати процес від оформлення до отримання товару.

- **Відгуки (`Review`)** та **списки бажань (`Wishlist`)** пов’язані з користувачем і продуктами, забезпечуючи інтерактивність та персоналізацію.  

- **Знижки (`Discount`)** можуть застосовуватись як до конкретного продукту, так і до всього замовлення.

## Обмеження та ключові моменти
- **Поля тексту:**  
  - `first_name` / `last_name` – до 50 символів,  
  - `email` – до 100 символів,  
  - `password_hash` – до 255 символів,  
  - `phone` – до 20 символів,  
  - `street` – до 100 символів,  
  - `comment` у відгуках – до 500 символів.  

- **ENUM-поля:** обмежують можливі значення для ролі користувача, статусів продуктів, замовлень, оплати та доставки, а також типу знижки. Це забезпечує контроль цілісності даних.  

- **Валідація знижок:** відбувається через дати `valid_from` і `valid_to` та прапорець `is_active`.  

- **Множинність:**  
  - Один користувач може мати багато адрес, кошиків, відгуків, замовлень і списків бажань.  
  - Один кошик містить багато елементів.  
  - Один продукт може з’являтися у багатьох кошиках, відгуках і списках бажань.  
  - Одне замовлення має одну доставку.  
